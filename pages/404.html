<#include "incl/macros.html">
<script>
  const path = window.location.pathname;
  const stdlibRegex = /^\/(stdlib|library)\//;
  const refmanRegex = /^\/distrib\/(.*)\/refman\//;
  const V80refmanRegex = /^\/distrib\/V8.0\/doc\//;
  const stdlibDistribRegex = /^\/distrib\/(.*)\/stdlib\//;
  if (stdlibRegex.test(path)) {
    window.location = path.replace(stdlibRegex, "/doc/<#CURRENTVERSIONTAG>/stdlib/");
  } else if (refmanRegex.test(path)) {
    const version = path.match(refmanRegex)[1];
    if (version == "current") {
      window.location = path.replace(refmanRegex, "/doc/<#CURRENTVERSIONTAG>/refman/");
    }
    else {
      window.location = path.replace(refmanRegex, "/doc/" + version + "/refman/");
    }
  } else if (stdlibDistribRegex.test(path)) {
    const version = path.match(stdlibDistribRegex)[1];
    if (version == "current") {
      window.location = path.replace(stdlibDistribRegex, "/doc/<#CURRENTVERSIONTAG>/stdlib/");
    }
    else {
      window.location = path.replace(stdlibDistribRegex, "/doc/" + version + "/stdlib/");
    }
  } else if (V80refmanRegex.test(path)) {
    window.location = path.replace(V80refmanRegex, "/doc/V8.0/doc/");
  } else {
    document.write("<h1>Not found</h1>");
  }
</script>
